<!DOCTYPE html>
<html lang="pt-br">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Cadastro de Clientes</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet" />
  <style>
    body {
      margin: 0;
      font-family: 'Segoe UI', sans-serif;
      color: #f8f9fa;
      background: linear-gradient(135deg, #0d1117, #161b22);
      min-height: 100vh;
    }

    header {
      background-color: #21262d;
      padding: 20px 30px;
      display: flex;
      justify-content: space-between;
      align-items: center;
      border-bottom: 2px solid #0d6efd;
    }

    .logo-title {
      font-size: 2rem;
      font-weight: bold;
      color: #f8f9fa;
    }

    nav a {
      color: #adb5bd;
      text-decoration: none;
      margin-left: 20px;
      font-weight: 500;
      transition: color 0.3s;
    }

    nav a:hover {
      color: #0d6efd;
    }

    .container {
      margin-top: 40px;
      max-width: 900px;
      background-color: #21262d;
      padding: 30px;
      border-radius: 12px;
      box-shadow: 0 0 20px #0d6efd55;
    }

    label {
      color: #f8f9fa;
    }

    input.form-control {
      background-color: #2d333b;
      border: 1px solid #444c56;
      color: #f8f9fa;
    }

    input.form-control:focus {
      background-color: #353b45;
      border-color: #0d6efd;
      box-shadow: 0 0 8px #0d6efd;
    }

    button.btn-primary {
      background-color: #0d6efd;
      border: none;
      transition: background-color 0.3s;
    }

    button.btn-primary:hover {
      background-color: #0b5ed7;
    }
  </style>
</head>
<body>

  <!-- TOPO -->
  <header>
    <div class="logo-title">Cadastro de Clientes</div>
    <nav>
      <a href="#">Dashboard</a>
      <a href="#">Clientes</a>
      <a href="#">Configurações</a>
    </nav>
  </header>

  <!-- FORMULÁRIO -->
  <div class="container mt-5">
    <h2 class="mb-4">Cadastro de Informações Pessoais</h2>
    <form id="form-cliente" >
      <div class="row mb-3">
        <div class="col-md-6">
          <label for="nome_completo" class="form-label">Nome Completo</label>
          <input type="text" class="form-control" id="nome_completo" name="nome_completo" required />
        </div>
        <div class="col-md-6">
          <label for="cpf" class="form-label">CPF</label>
          <input type="text" class="form-control" id="cpf" name="cpf" required />
        </div>
      </div>

      <div class="row mb-3">
        <div class="col-md-6">
          <label for="telefone" class="form-label">Telefone</label>
          <input type="tel" class="form-control" id="telefone" name="telefone" required />
        </div>
        <div class="col-md-6">
          <label for="email" class="form-label">Email</label>
          <input type="email" class="form-control" id="email" name="email" required />
        </div>
      </div>

      <div class="row mb-3">
        <div class="col-md-4">
          <label for="estado" class="form-label">Estado</label>
          <input type="text" class="form-control" id="estado" name="estado" required />
        </div>
        <div class="col-md-4">
          <label for="cidade" class="form-label">Cidade</label>
          <input type="text" class="form-control" id="cidade" name="cidade" required />
        </div>
        <div class="col-md-4">
          <label for="bairro" class="form-label">Bairro</label>
          <input type="text" class="form-control" id="bairro" name="bairro" required />
        </div>
      </div>

      <div class="row mb-3">
        <div class="col-md-6">
          <label for="rua" class="form-label">Rua</label>
          <input type="text" class="form-control" id="rua" name="rua" required />
        </div>
        <div class="col-md-3">
          <label for="n_casa" class="form-label">Número</label>
          <input type="text" class="form-control" id="n_casa" name="n_casa" required />
        </div>
        <div class="col-md-3">
          <label for="cep" class="form-label">CEP</label>
          <input type="text" class="form-control" id="cep" name="cep" required />
        </div>
      </div>
      <button type="button" onclick="desbloquearEndereco()">Editar Endereço</button>
      <script>
        function desbloquearEndereco() {
          document.getElementById('rua').readOnly = false;
          document.getElementById('bairro').readOnly = false;
          document.getElementById('cidade').readOnly = false;
          document.getElementById('estado').readOnly = false;
        }
      </script>
      


      <div class="row mb-4">
        <div class="col-md-6">
          <label for="senha" class="form-label">Criar Senha de Acesso</label>
          <input type="password" class="form-control" id="senha" name="senha" required />
        </div>
      </div>

      <input type="submit" value="Enviar cadastro" class="enviar" id="btn-enviar"></input>
    </form>
  </div>
  
  <script src="./script/cadastro.js"></script>

  <script>
    // Máscara para CPF: 000.000.000-00
    function mascaraCPF(cpf) {
      cpf = cpf.replace(/\D/g, ''); // Remove tudo que não é dígito
      cpf = cpf.replace(/(\d{3})(\d)/, '$1.$2');
      cpf = cpf.replace(/(\d{3})(\d)/, '$1.$2');
      cpf = cpf.replace(/(\d{3})(\d{1,2})$/, '$1-$2');
      return cpf;
    }
  
    // Máscara para CEP: 00000-000
    function mascaraCEP(cep) {
      cep = cep.replace(/\D/g, '');
      cep = cep.replace(/(\d{5})(\d{1,3})$/, '$1-$2');
      return cep;
    }
  
    // Aplica as máscaras enquanto digita
    document.addEventListener('DOMContentLoaded', function () {
      const cpfInput = document.getElementById('cpf');
      const cepInput = document.getElementById('cep');
  
      cpfInput.addEventListener('input', function () {
        this.value = mascaraCPF(this.value);
      });
  
      cepInput.addEventListener('input', function () {
        this.value = mascaraCEP(this.value);
      });
    });
    function mascaraTelefone(telefone) {
    telefone = telefone.replace(/\D/g, '');

    if (telefone.length > 10) {
      // Celular com 9 dígitos
      telefone = telefone.replace(/^(\d{2})(\d{5})(\d{4}).*/, '($1) $2-$3');
    } else {
      // Telefone fixo
      telefone = telefone.replace(/^(\d{2})(\d{4})(\d{0,4}).*/, '($1) $2-$3');
    }

    return telefone;
  }

  // Aplica máscaras enquanto digita
  document.addEventListener('DOMContentLoaded', function () {
    const cpfInput = document.getElementById('cpf');
    const cepInput = document.getElementById('cep');
    const telefoneInput = document.getElementById('telefone');

    cpfInput.addEventListener('input', function () {
      this.value = mascaraCPF(this.value);
    });

    cepInput.addEventListener('input', function () {
      this.value = mascaraCEP(this.value);
    });

    telefoneInput.addEventListener('input', function () {
      this.value = mascaraTelefone(this.value);
    });
  });
  </script>

<script>
  async function buscarEndereco(cep) {
    try {
      const resposta = await fetch(`https://viacep.com.br/ws/${cep}/json/`);
      const dados = await resposta.json();

      if (dados.erro) {
        alert('CEP não encontrado.');
        return;
      }

      // Preenche os campos
      document.getElementById('rua').value = dados.logradouro;
      document.getElementById('bairro').value = dados.bairro;
      document.getElementById('cidade').value = dados.localidade;
      document.getElementById('estado').value = dados.uf;

      // Torna os campos readonly
      document.getElementById('rua').readOnly = true;
      document.getElementById('bairro').readOnly = true;
      document.getElementById('cidade').readOnly = true;
      document.getElementById('estado').readOnly = true;

    } catch (error) {
      console.error('Erro ao buscar CEP:', error);
      alert('Erro ao buscar informações do CEP.');
    }
  }

  document.addEventListener('DOMContentLoaded', function () {
    const cepInput = document.getElementById('cep');

    cepInput.addEventListener('blur', function () {
      const cepLimpo = this.value.replace(/\D/g, '');
      if (cepLimpo.length === 8) {
        buscarEndereco(cepLimpo);
      }
    });
  });
</script>

  
</body>
</html>
